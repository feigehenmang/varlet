import{F as Q,u as G}from"./provide.33f00d49.js";import{I as H}from"./index.d0618c3d.js";import{d as J,a as F,z as K,b as L,aP as f,o as X,n as Y,_ as Z,p as $,f as t,h as y,M as p,N as r,O as z,j as B,R as m,Q as c,q as x,i as _}from"./vue-router.esm-bundler.a03b8b02.js";import{h as ee,e as d,c as ne}from"./components.eb927237.js";function le(e){return["text","password","number"].includes(e)}const ae={modelValue:{type:String},modelModifiers:{type:Object,default:()=>({})},type:{type:String,default:"text",validator:le},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:{type:Function},onBlur:{type:Function},onClick:{type:Function},onClear:{type:Function},onInput:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}},{n:V,classes:oe}=ne("input"),se=J({name:"VarInput",components:{VarIcon:H,VarFormDetails:Q},props:ae,setup(e){const l=F(`var-input-${K().uid}`),g=F(null),h=F(!1),I=L(()=>{const{maxlength:n,modelValue:s}=e;return n?f(s)?`0 / ${n}`:`${String(s).length}/${n}`:""}),{bindForm:M,form:a}=G(),{errorMessage:b,validateWithTrigger:o,validate:N,resetValidation:v}=ee(),u=n=>{Y(()=>{const{validateTrigger:s,rules:i,modelValue:C}=e;o(s,n,i,C)})},P=()=>{const{hint:n,modelValue:s}=e;if(!n&&!f(s))return V("--placeholder-hidden");if(n&&(!f(s)||h.value))return V("--placeholder-hint")},R=n=>{h.value=!0,d(e.onFocus,n),u("onFocus")},U=n=>{h.value=!1,d(e.onBlur,n),u("onBlur")},E=n=>{let{value:s}=n.target;s=T(s),d(e["onUpdate:modelValue"],s),d(e.onInput,s,n),u("onInput")},j=n=>{const{value:s}=n.target;d(e.onChange,T(s),n),u("onChange")},A=()=>{const{disabled:n,readonly:s,clearable:i,onClear:C}=e;(a==null?void 0:a.disabled.value)||(a==null?void 0:a.readonly.value)||n||s||!i||(d(e["onUpdate:modelValue"],""),d(C,""),u("onClear"))},O=n=>{const{disabled:s,onClick:i}=e;(a==null?void 0:a.disabled.value)||s||(d(i,n),u("onClick"))},T=n=>e.modelModifiers.trim?n.trim():n,W=n=>{const{disabled:s,readonly:i}=e;(a==null?void 0:a.disabled.value)||(a==null?void 0:a.readonly.value)||s||i||n.stopPropagation()},S=()=>{d(e["onUpdate:modelValue"],""),v()},w=()=>N(e.rules,e.modelValue),D=()=>{var n;(n=g.value)==null||n.focus()},q=()=>{g.value.blur()};return d(M,{reset:S,validate:w,resetValidation:v}),X(()=>{e.autofocus&&D()}),{el:g,id:l,isFocus:h,errorMessage:b,maxlengthText:I,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,n:V,classes:oe,isEmpty:f,computePlaceholderState:P,handleFocus:R,handleBlur:U,handleInput:E,handleChange:j,handleClear:A,handleClick:O,handleTouchstart:W,validate:w,resetValidation:v,reset:S,focus:D,blur:q}}});const re=["id","disabled","type","value","maxlength","rows"],de=["id","disabled","type","value","maxlength"],ie=["for"];function ue(e,l,g,h,I,M){const a=$("var-icon"),b=$("var-form-details");return t(),y("div",{class:r(e.classes(e.n(),e.n("$--box"),[e.disabled,e.n("--disabled")])),onClick:l[10]||(l[10]=(...o)=>e.handleClick&&e.handleClick(...o))},[p("div",{class:r(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:m({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[p("div",{class:r(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[z(e.$slots,"prepend-icon")],2),p("div",{class:r(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(t(),y("input",{key:0,class:r(e.n("autocomplete"))},null,2)):B("",!0),e.textarea?(t(),y("textarea",{key:1,class:r(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:m({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:l[0]||(l[0]=(...o)=>e.handleFocus&&e.handleFocus(...o)),onBlur:l[1]||(l[1]=(...o)=>e.handleBlur&&e.handleBlur(...o)),onInput:l[2]||(l[2]=(...o)=>e.handleInput&&e.handleInput(...o)),onChange:l[3]||(l[3]=(...o)=>e.handleChange&&e.handleChange(...o)),onTouchstart:l[4]||(l[4]=(...o)=>e.handleTouchstart&&e.handleTouchstart(...o))},`
        `,46,re)):(t(),y("input",{key:2,class:r(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:m({color:e.textColor,caretColor:e.errorMessage?void 0:e.focusColor}),onFocus:l[5]||(l[5]=(...o)=>e.handleFocus&&e.handleFocus(...o)),onBlur:l[6]||(l[6]=(...o)=>e.handleBlur&&e.handleBlur(...o)),onInput:l[7]||(l[7]=(...o)=>e.handleInput&&e.handleInput(...o)),onChange:l[8]||(l[8]=(...o)=>e.handleChange&&e.handleChange(...o)),onTouchstart:l[9]||(l[9]=(...o)=>e.handleTouchstart&&e.handleTouchstart(...o))},null,46,de)),p("label",{class:r(e.classes(e.n("$--ellipsis"),[e.isFocus,e.n("--focus")],[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:m({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},c(e.placeholder),15,ie)],2),p("div",{class:r(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[z(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(t(),_(a,{key:0,class:r(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):B("",!0)])],2)],6),e.line?(t(),y("div",{key:0,class:r(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:m({background:e.errorMessage?void 0:e.blurColor})},[p("div",{class:r(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:m({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):B("",!0),x(b,{"error-message":e.errorMessage,"extra-message":e.maxlengthText},null,8,["error-message","extra-message"])],2)}const k=Z(se,[["render",ue]]);k.install=function(e){e.component(k.name,k)};export{k as I};
